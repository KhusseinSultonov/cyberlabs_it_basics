<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–≥—Ä–∞: –ú–æ–¥–µ–ª—å OSI</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            color: #e0e0e0;
            transition: all 0.5s ease;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: rgba(40, 40, 40, 0.9);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            padding: 30px;
            transition: all 0.5s ease;
        }
        
        h1 {
            text-align: center;
            color: #f5f5f5;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            background-color: #1e88e5;
            color: white;
            padding: 15px;
            border-radius: 10px;
            align-items: center;
        }
        
        .score {
            font-size: 1.3em;
            font-weight: bold;
        }
        
        .game-area {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .levels {
            flex: 1;
            min-width: 300px;
        }
        
        .level {
            background-color: #2d2d2d;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            border-left: 5px solid;
            min-height: 80px;
            color: #e0e0e0;
        }
        
        .level.highlight {
            background-color: #1e3a5f;
            transform: scale(1.02);
        }
        
        .level:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .level h3 {
            margin-top: 0;
            display: flex;
            justify-content: space-between;
            color: #f5f5f5;
        }
        
        .level-items {
            min-height: 20px;
        }
        
        .items {
            flex: 1;
            min-width: 300px;
            background-color: #2d2d2d;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        
        .item {
            padding: 10px 15px;
            margin: 8px 0;
            background-color: #3d3d3d;
            border-radius: 5px;
            cursor: grab;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
            user-select: none;
            color: #e0e0e0;
        }
        
        .item:hover {
            background-color: #4d4d4d;
        }
        
        .item.dragging {
            opacity: 0.8;
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }
        
        .item.correct {
            background-color: #2e7d32;
            border-left: 3px solid #4caf50;
            color: white;
        }
        
        .item.incorrect {
            background-color: #c62828;
            border-left: 3px solid #f44336;
            color: white;
        }
        
        .feedback {
            text-align: center;
            margin: 20px 0;
            font-size: 1.2em;
            min-height: 30px;
        }
        
        .correct {
            color: #4caf50;
            font-weight: bold;
        }
        
        .incorrect {
            color: #f44336;
            font-weight: bold;
        }
        
        .level-1 { border-color: #00acc1; }
        .level-2 { border-color: #43a047; }
        .level-3 { border-color: #ffb300; }
        .level-4 { border-color: #8e24aa; }
        .level-5 { border-color: #fb8c00; }
        .level-6 { border-color: #e91e63; }
        .level-7 { border-color: #1e88e5; }
        
        .btn {
            background-color: #1e88e5;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background-color: #1565c0;
            transform: translateY(-2px);
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è */
        .completion-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0d47a1 0%, #1a237e 100%);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            z-index: 1000;
            opacity: 0;
            transition: opacity 1s ease;
        }
        
        .completion-screen.show {
            display: flex;
            opacity: 1;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            animation: fall 5s linear infinite;
        }
        
        @keyframes fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        .trophy {
            font-size: 100px;
            margin-bottom: 30px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-30px);
            }
        }
        
        .completion-text {
            font-size: 3em;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .restart-btn {
            background-color: white;
            color: #1e88e5;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 50px;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .restart-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        @media (max-width: 768px) {
            .game-area {
                flex-direction: column;
            }
            
            .completion-text {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container" id="game-container">
        <h1>–ú–æ–¥–µ–ª—å OSI: –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤</h1>
        
        <div class="game-header">
            <div class="score">–°—á–µ—Ç: <span id="score">0</span></div>
            <div>–ü–æ–ø—ã—Ç–æ–∫: <span id="attempts">0</span></div>
            <button class="btn" id="new-game-btn">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
        </div>
        
        <div class="feedback" id="feedback"></div>
        
        <div class="game-area">
            <div class="levels">
                <h2>–£—Ä–æ–≤–Ω–∏ –º–æ–¥–µ–ª–∏ OSI</h2>
                <div id="levels-container"></div>
            </div>
            
            <div class="items">
                <h2>–î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã</h2>
                <div id="items-container"></div>
            </div>
        </div>
    </div>

    <div class="completion-screen" id="completion-screen">
        <div class="trophy">üèÜ</div>
        <div class="completion-text">–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!<br>–í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª–∏ –∏–≥—Ä—É!</div>
        <div>–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: <span id="final-score">0</span> –∏–∑ <span id="total-questions">0</span></div>
        <button class="restart-btn" id="restart-btn">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        <div id="confetti-container"></div>
        <div class="exit-hint">–î–ª—è –≤—ã—Ö–æ–¥–∞ –Ω–∞–∂–º–∏—Ç–µ Esc</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const game = {
                score: 0,
                attempts: 0,
                draggedItem: null,
                draggedItemElement: null,
                feedback: '',
                totalItems: 0,
                isDragging: false,
                
                levels: [
                    { id: 1, name: "–§–∏–∑–∏—á–µ—Å–∫–∏–π (Physical)", items: [], color: 'level-1' },
                    { id: 2, name: "–ö–∞–Ω–∞–ª—å–Ω—ã–π (Data Link)", items: [], color: 'level-2' },
                    { id: 3, name: "–°–µ—Ç–µ–≤–æ–π (Network)", items: [], color: 'level-3' },
                    { id: 4, name: "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π (Transport)", items: [], color: 'level-4' },
                    { id: 5, name: "–°–µ–∞–Ω—Å–æ–≤—ã–π (Session)", items: [], color: 'level-5' },
                    { id: 6, name: "–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (Presentation)", items: [], color: 'level-6' },
                    { id: 7, name: "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–π (Application)", items: [], color: 'level-7' }
                ],
                
                itemsPool: [
                    { name: "IP-–∞–¥—Ä–µ—Å–∞", level: 3 },
                    { name: "Ethernet (MAC-–∞–¥—Ä–µ—Å–∞)", level: 2 },
                    { name: "SSL/TLS-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ", level: 6 },
                    { name: "HTTP/HTTPS", level: 7 },
                    { name: "–ö–∞–±–µ–ª–∏ (–≤–∏—Ç–∞—è –ø–∞—Ä–∞, –æ–ø—Ç–æ–≤–æ–ª–æ–∫–Ω–æ)", level: 1 },
                    { name: "–ü–æ—Ä—Ç—ã TCP/UDP", level: 4 },
                    { name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Å—Å–∏–∏ (RPC, PAP)", level: 5 },
                    { name: "–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä—ã", level: 3 },
                    { name: "–§–∞–π—Ä–≤–æ–ª—ã", level: 4 },
                    { name: "JPEG/ASCII –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ", level: 6 },
                    { name: "FTP/SMTP", level: 7 },
                    { name: "Wi-Fi", level: 2 },
                    { name: "–ö–æ–º–º—É—Ç–∞—Ç–æ—Ä—ã", level: 2 },
                    { name: "TCP/UDP –ø—Ä–æ—Ç–æ–∫–æ–ª—ã", level: 4 },
                    { name: "DNS", level: 7 },
                    { name: "DHCP", level: 7 },
                    { name: "–í–æ–ª–æ–∫–æ–Ω–Ω–æ-–æ–ø—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏–≥–Ω–∞–ª—ã", level: 1 }
                ],
                
                currentItems: [],
                
                init() {
                    this.setupEventListeners();
                    this.resetGame();
                    this.render();
                },
                
                setupEventListeners() {
                    // –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
                    document.getElementById('restart-btn').addEventListener('click', () => {
                        this.hideCompletionScreen();
                        this.resetGame();
                    });
                    
                    // –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –Ω–æ–≤–æ–π –∏–≥—Ä—ã
                    document.getElementById('new-game-btn').addEventListener('click', () => {
                        this.resetGame();
                    });
                    
                    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è drag and drop
                    document.addEventListener('dragstart', (e) => {
                        if (e.target.classList.contains('item') && !e.target.classList.contains('correct')) {
                            this.isDragging = true;
                            this.draggedItemElement = e.target;
                            e.target.classList.add('dragging');
                            
                            const itemName = e.target.textContent;
                            this.draggedItem = this.currentItems.find(item => item.name === itemName);
                            
                            e.dataTransfer.setData('text/plain', itemName);
                            e.dataTransfer.effectAllowed = 'move';
                        }
                    });
                    
                    document.addEventListener('dragend', (e) => {
                        if (e.target.classList.contains('item')) {
                            this.isDragging = false;
                            e.target.classList.remove('dragging');
                        }
                    });
                    
                    document.addEventListener('dragover', (e) => {
                        if (this.isDragging) {
                            e.preventDefault();
                            const levelElement = e.target.closest('.level');
                            if (levelElement) {
                                document.querySelectorAll('.level').forEach(el => el.classList.remove('highlight'));
                                levelElement.classList.add('highlight');
                            }
                        }
                    });
                    
                    document.addEventListener('dragleave', (e) => {
                        const levelElement = e.target.closest('.level');
                        if (levelElement && this.isDragging) {
                            levelElement.classList.remove('highlight');
                        }
                    });
                    
                    document.addEventListener('drop', (e) => {
                        e.preventDefault();
                        document.querySelectorAll('.level').forEach(el => el.classList.remove('highlight'));
                        
                        const levelElement = e.target.closest('.level');
                        if (levelElement && this.draggedItem) {
                            const levelId = parseInt(levelElement.querySelector('h3 span').textContent.split('.')[0]);
                            this.checkAnswer(this.draggedItem, levelId);
                        }
                    });
                },
                
                resetGame() {
                    this.score = 0;
                    this.attempts = 0;
                    this.draggedItem = null;
                    this.draggedItemElement = null;
                    this.feedback = '';
                    this.totalItems = 0;
                    this.isDragging = false;
                    
                    // –û—á–∏—â–∞–µ–º –≤—Å–µ —É—Ä–æ–≤–Ω–∏
                    this.levels.forEach(level => level.items = []);
                    
                    // –í—ã–±–∏—Ä–∞–µ–º 8 —Å–ª—É—á–∞–π–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                    this.currentItems = [...this.itemsPool].sort(() => 0.5 - Math.random()).slice(0, 8);
                    this.totalItems = this.currentItems.length;
                    
                    this.updateStats();
                    this.render();
                },
                
                checkAnswer(item, levelId) {
                    this.attempts++;
                    
                    if (item.level === levelId) {
                        // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                        this.score++;
                        this.feedback = `‚úÖ –í–µ—Ä–Ω–æ! ${item.name} –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —É—Ä–æ–≤–Ω—é ${levelId}`;
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç –Ω–∞ —É—Ä–æ–≤–µ–Ω—å
                        const level = this.levels.find(l => l.id === levelId);
                        level.items.push(item);
                        
                        // –£–¥–∞–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
                        this.currentItems = this.currentItems.filter(i => i !== item);
                        
                        // –ü–æ–º–µ—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
                        if (this.draggedItemElement) {
                            this.draggedItemElement.classList.add('correct');
                            setTimeout(() => {
                                this.draggedItemElement.remove();
                                this.draggedItemElement = null;
                            }, 500);
                        }
                        
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
                        if (this.currentItems.length === 0) {
                            setTimeout(() => this.showCompletionScreen(), 800);
                            return;
                        }
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç, –µ—Å–ª–∏ –æ—Å—Ç–∞–ª–æ—Å—å –º–∞–ª–æ
                        if (this.currentItems.length < 3 && this.itemsPool.length > this.currentItems.length + level.items.length) {
                            const availableItems = this.itemsPool.filter(i => 
                                !this.currentItems.includes(i) && 
                                !this.levels.some(l => l.items.includes(i))
                            );
                            if (availableItems.length > 0) {
                                const newItem = availableItems[Math.floor(Math.random() * availableItems.length)];
                                this.currentItems.push(newItem);
                                this.totalItems++;
                            }
                        }
                    } else {
                        // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                        const correctLevel = this.levels.find(l => l.id === item.level);
                        this.feedback = `‚ùå –ù–µ–≤–µ—Ä–Ω–æ! ${item.name} –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —É—Ä–æ–≤–Ω—é ${correctLevel.name}`;
                        
                        // –ü–æ–º–µ—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –∫–∞–∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
                        if (this.draggedItemElement) {
                            this.draggedItemElement.classList.add('incorrect');
                            setTimeout(() => {
                                this.draggedItemElement.classList.remove('incorrect');
                                this.draggedItemElement = null;
                            }, 1000);
                        }
                    }
                    
                    this.draggedItem = null;
                    this.updateStats();
                    this.render();
                },
                
                showCompletionScreen() {
                    // –°–∫—Ä—ã–≤–∞–µ–º –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ
                    document.getElementById('game-container').style.display = 'none';
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
                    const completionScreen = document.getElementById('completion-screen');
                    completionScreen.classList.add('show');
                    
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å—á–µ—Ç
                    document.getElementById('final-score').textContent = this.score;
                    document.getElementById('total-questions').textContent = this.totalItems;
                    
                    // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
                    this.createConfetti();
                },
                
                hideCompletionScreen() {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ
                    document.getElementById('game-container').style.display = 'block';
                    
                    // –°–∫—Ä—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
                    const completionScreen = document.getElementById('completion-screen');
                    completionScreen.classList.remove('show');
                },
                
                createConfetti() {
                    const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
                    const container = document.getElementById('confetti-container');
                    container.innerHTML = '';
                    
                    for (let i = 0; i < 100; i++) {
                        const confetti = document.createElement('div');
                        confetti.className = 'confetti';
                        confetti.style.left = Math.random() * 100 + 'vw';
                        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                        confetti.style.width = Math.random() * 10 + 5 + 'px';
                        confetti.style.height = Math.random() * 10 + 5 + 'px';
                        confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
                        confetti.style.animationDelay = Math.random() * 2 + 's';
                        container.appendChild(confetti);
                    }
                },
                
                updateStats() {
                    document.getElementById('score').textContent = this.score;
                    document.getElementById('attempts').textContent = this.attempts;
                    
                    const feedbackEl = document.getElementById('feedback');
                    feedbackEl.textContent = this.feedback;
                    feedbackEl.className = 'feedback';
                    
                    if (this.feedback.includes('‚úÖ')) {
                        feedbackEl.classList.add('correct');
                    } else if (this.feedback.includes('‚ùå')) {
                        feedbackEl.classList.add('incorrect');
                    }
                },
                
                render() {
                    // –†–µ–Ω–¥–µ—Ä–∏–º —É—Ä–æ–≤–Ω–∏
                    const levelsContainer = document.getElementById('levels-container');
                    levelsContainer.innerHTML = '';
                    
                    this.levels.forEach(level => {
                        const levelEl = document.createElement('div');
                        levelEl.className = `level ${level.color}`;
                        levelEl.draggable = false;
                        levelEl.innerHTML = `
                            <h3>
                                <span>${level.id}. ${level.name}</span>
                                <span>(${level.items.length})</span>
                            </h3>
                            <div class="level-items">
                                ${level.items.map(item => `<div>‚Ä¢ ${item.name}</div>`).join('')}
                            </div>
                        `;
                        levelsContainer.appendChild(levelEl);
                    });
                    
                    // –†–µ–Ω–¥–µ—Ä–∏–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
                    const itemsContainer = document.getElementById('items-container');
                    itemsContainer.innerHTML = '';
                    
                    this.currentItems.forEach(item => {
                        const itemEl = document.createElement('div');
                        itemEl.className = 'item';
                        itemEl.textContent = item.name;
                        itemEl.draggable = true;
                        itemsContainer.appendChild(itemEl);
                    });
                }
            };
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∏–≥—Ä—É
            game.init();
        });
    </script>
</body>
</html>
